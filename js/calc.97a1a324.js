(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["calc"],{1239:function(t,e,r){},"27ac":function(t,e,r){},"39c1":function(t,e,r){"use strict";r.r(e);var n=r("7a23");const o=t=>(Object(n["v"])("data-v-3a6989bc"),t=t(),Object(n["t"])(),t),i={class:"grid"},a={class:"grid__item"},c={style:{display:"flex","align-items":"center"}},u=o(()=>Object(n["g"])("div",{style:{"padding-right":"10px"}}," = ",-1));function s(t,e,r,o,s,m){const l=Object(n["z"])("FractionComponent"),p=Object(n["z"])("OperatorComponent");return Object(n["s"])(),Object(n["f"])("div",null,[Object(n["g"])("div",i,[(Object(n["s"])(!0),Object(n["f"])(n["a"],null,Object(n["y"])(m.expressionMembers,t=>(Object(n["s"])(),Object(n["f"])("div",{key:t.id,class:"grid__item"},[s.Fraction.isFraction(t)?(Object(n["s"])(),Object(n["d"])(l,{key:0,fraction:t,onInput:m.onFractionInput},null,8,["fraction","onInput"])):Object(n["e"])("",!0),s.Operator.isOperator(t)?(Object(n["s"])(),Object(n["d"])(p,{key:1,operator:t,"operator-types":s.OPERATOR_TYPES,onInput:e=>m.onOperatorInput(t,e)},null,8,["operator","operator-types","onInput"])):Object(n["e"])("",!0)]))),128)),Object(n["g"])("div",a,[Object(n["g"])("div",c,[u,Object(n["g"])("div",null,[Object(n["i"])(l,{fraction:m.result,readonly:""},null,8,["fraction"])])])])]),Object(n["g"])("button",{onClick:e[0]||(e[0]=(...t)=>m.addFraction&&m.addFraction(...t))},"ADD FRACTION")])}class m{constructor(t=null,e=null){this.id=m._id(),this._numerator=t,this._denominator=e,this.errors=[],this.pattern=/^-?[0-9]+$/}static isFraction(t){return t.__proto__.constructor===m}get numerator(){return null===this._numerator||""===this._numerator?"":this._numerator}get numericNumerator(){return+this._numerator}set numerator(t){this._numerator=t}get denominator(){return null===this._denominator||""===this._denominator?"":this._denominator}get numericDenominator(){return+this._denominator}set denominator(t){this._denominator=t}isNotEmpty(){return!(!this._numerator||!this._denominator)}validateInput(){return this.isNotEmpty()&&!(!this.pattern.test(this._numerator)||!this.pattern.test(this._denominator))}isValidNumericValue(){return!isNaN(this.numericNumerator)&&!isNaN(this.numericDenominator)&&!(this.numericNumerator>Number.MAX_SAFE_INTEGER||this.numericDenominator>Number.MAX_SAFE_INTEGER||this.numericNumerator<Number.MIN_SAFE_INTEGER||this.numericDenominator<Number.MIN_SAFE_INTEGER)}checkErrors(){return this.clearErrors(),this.isNotEmpty()&&!this.validateInput()?(this.errors.push("Некорректный формат данных. Разрешены только натуральные числа"),!1):!!this.isValidNumericValue()||(this.errors.push(`Неподдерживаемое число. Возможные значения лежат в диапазоне [${Number.MIN_SAFE_INTEGER} - ${Number.MAX_SAFE_INTEGER}]`),!1)}clearErrors(){this.errors=[]}validate(){return this.validateInput()&&this.isValidNumericValue()&&this.checkErrors()}}let l=0;m._id=()=>l++;class p{constructor(t=""){this.id=p._id(),this._type=t,this.order=p.ORDERS[t]}static isOperator(t){return t.__proto__.constructor===p}get type(){return this._type}set type(t){this._type=t,this.order=p.ORDERS[t]}}let d=-1;p._id=()=>d--;const O={MINUS:"-",PLUS:"+",MULTIPLY:"*",DIVIDE:"/"},h={[O.MINUS]:2,[O.PLUS]:2,[O.MULTIPLY]:1,[O.DIVIDE]:1};p.TYPES=Object.values(O),p.OPERATORS=O,p.ORDERS=h;const b=t=>(Object(n["v"])("data-v-300cc07e"),t=t(),Object(n["t"])(),t),j={class:"fractionComponent"},_=["readonly","value"],f=b(()=>Object(n["g"])("hr",null,null,-1)),v=["readonly","value"];function N(t,e,r,o,i,a){return Object(n["s"])(),Object(n["f"])("div",j,[Object(n["g"])("div",null,[Object(n["g"])("input",{readonly:t.$props.readonly,type:"number",onInput:e[0]||(e[0]=t=>a.onInput(t,"numerator")),value:t.$props.fraction.numerator},null,40,_)]),f,Object(n["g"])("div",null,[Object(n["g"])("input",{readonly:t.$props.readonly,type:"number",onInput:e[1]||(e[1]=t=>a.onInput(t,"denominator")),value:t.$props.fraction.denominator},null,40,v)]),Object(n["g"])("div",null,[(Object(n["s"])(!0),Object(n["f"])(n["a"],null,Object(n["y"])(t.$props.fraction.errors,t=>(Object(n["s"])(),Object(n["f"])("div",{key:t,style:{color:"red","font-size":"0.5em"}},Object(n["B"])(t),1))),128))])])}var E={name:"FractionComponent",props:["fraction","readonly"],emits:["input"],methods:{onInput(t,e){this.$emit("input",{event:t,fraction:this.fraction,field:e})}}},y=(r("d7c3"),r("6b0d")),I=r.n(y);const D=I()(E,[["render",N],["__scopeId","data-v-300cc07e"]]);var g=D;const R=t=>(Object(n["v"])("data-v-9e7e4372"),t=t(),Object(n["t"])(),t),w=["value"],S=R(()=>Object(n["g"])("option",{value:""},"Chose an operator",-1)),T=["value"];function P(t,e,r,o,i,a){return Object(n["s"])(),Object(n["f"])("div",null,[Object(n["g"])("select",Object(n["n"])(t.$attrs,{value:t.$props.operator.type}),[S,(Object(n["s"])(!0),Object(n["f"])(n["a"],null,Object(n["y"])(t.$props.operatorTypes,t=>(Object(n["s"])(),Object(n["f"])("option",{value:t,key:t},Object(n["B"])(t),9,T))),128))],16,w)])}var A={name:"OperatorComponent",props:["operator","operatorTypes"]};r("ac26");const F=I()(A,[["render",P],["__scopeId","data-v-9e7e4372"]]);var M=F,$={name:"Calc",components:{OperatorComponent:M,FractionComponent:g},data(){return{fractions:[new m,new m],operators:[new p(p.OPERATORS.MULTIPLY)],OPERATOR_TYPES:p.TYPES,Fraction:m,Operator:p}},computed:{expressionMembers(){const t=[];return this.fractions.forEach((e,r,n)=>{t.push(e),n.length-1!==r&&t.push(this.operators[r])}),t},result(){if(this.fractions.every(t=>t.validate())&&this.operators.every(({type:t})=>t)){let t=!1;const e=[...this.expressionMembers];while(!t){let r=null,n=null;if(e.forEach((t,e)=>{Object.prototype.hasOwnProperty.call(t,"order")&&(null===r||t.order<r)&&(r=t.order,n=e)}),null!==n){const t=this.calculate(e[n-1],e[n+1],e[n]);e.splice(n-1,3,t)}else t=!0}const r=e[0],n=this.gcd(r);return new m(r.numerator/n,r.denominator/n)}return new m(0,0)}},methods:{addFraction(){this.fractions.push(new m),this.operators.push(new p)},calculate(t,e,r){switch(r.type){case p.OPERATORS.PLUS:return this.add(t,e);case p.OPERATORS.MINUS:return this.subtract(t,e);case p.OPERATORS.DIVIDE:return this.divide(t,e);case p.OPERATORS.MULTIPLY:return this.multiply(t,e)}},add(t,e){if(t.numericDenominator===e.numericDenominator)return new m(t.numericNumerator+e.numericNumerator,t.numericDenominator);{const r=new m(t.numericNumerator*e.numericDenominator,t.numericDenominator*e.numericDenominator),n=new m(e.numericNumerator*t.numericDenominator,e.numericDenominator*t.numericDenominator);return new m(r.numericNumerator+n.numericNumerator,r.numericDenominator)}},subtract(t,e){if(t.numericDenominator===e.numericDenominator)return new m(t.numericNumerator-e.numericNumerator,t.numericDenominator);{const r=new m(t.numericNumerator*e.numericDenominator,t.numericDenominator*e.numericDenominator),n=new m(e.numericNumerator*t.numericDenominator,e.numericDenominator*t.numericDenominator);return new m(r.numericNumerator-n.numericNumerator,r.numericDenominator)}},divide(t,e){return new m(t.numericNumerator*e.numericDenominator,t.numericDenominator*e.numericNumerator)},multiply(t,e){return new m(t.numericNumerator*e.numericNumerator,t.numericDenominator*e.numericDenominator)},gcd(t){let e=t.numericNumerator,r=t.numericDenominator;if(e=Math.abs(e),r=Math.abs(r),r>e){const t=e;e=r,r=t}while(1){if(0===r)return e;if(e%=r,0===e)return r;r%=e}},onFractionInput({fraction:t,field:e,event:r}){t[e]=r.target.value,t.checkErrors()},onOperatorInput(t,e){t.type=e.target.value}}};r("a996");const k=I()($,[["render",s],["__scopeId","data-v-3a6989bc"]]);e["default"]=k},a996:function(t,e,r){"use strict";r("1239")},ac26:function(t,e,r){"use strict";r("27ac")},d7c3:function(t,e,r){"use strict";r("faca")},faca:function(t,e,r){}}]);
//# sourceMappingURL=calc.97a1a324.js.map