(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["calc"],{"2e3d":function(r,t,e){"use strict";var n=e("f8aa"),i=e.n(n);i.a},"2ea7":function(r,t,e){"use strict";var n=e("df38"),i=e.n(n);i.a},"39c1":function(r,t,e){"use strict";e.r(t);var n=function(){var r=this,t=r.$createElement,e=r._self._c||t;return e("div",[e("div",{staticClass:"grid"},[r._l(r.expressionMembers,(function(t){return e("div",{key:t.id,staticClass:"grid__item"},[r.Fraction.isFraction(t)?e("FractionComponent",{attrs:{fraction:t},on:{input:r.onFractionInput}}):r._e(),r.Operator.isOperator(t)?e("OperatorComponent",{attrs:{operator:t,"operator-types":r.OPERATOR_TYPES},on:{input:function(e){return r.onOperatorInput(t,e)}}}):r._e()],1)})),e("div",{staticClass:"grid__item"},[e("div",{staticStyle:{display:"flex","align-items":"center"}},[e("div",{staticStyle:{"padding-right":"10px"}},[r._v(" = ")]),e("div",[e("FractionComponent",{attrs:{fraction:r.result,readonly:""}})],1)])])],2),e("button",{on:{click:r.addFraction}},[r._v("ADD FRACTION")])])},i=[];class o{constructor(r=null,t=null){this.id=o._id(),this._numerator=r,this._denominator=t,this.errors=[],this.pattern=/^-?[0-9]+$/}static isFraction(r){return r.__proto__.constructor===o}get numerator(){return null===this._numerator||""===this._numerator?"":this._numerator}get numericNumerator(){return+this._numerator}set numerator(r){this._numerator=r}get denominator(){return null===this._denominator||""===this._denominator?"":this._denominator}get numericDenominator(){return+this._denominator}set denominator(r){this._denominator=r}isNotEmpty(){return!(!this._numerator||!this._denominator)}validateInput(){return this.isNotEmpty()&&!(!this.pattern.test(this._numerator)||!this.pattern.test(this._denominator))}isValidNumericValue(){return!isNaN(this.numericNumerator)&&!isNaN(this.numericDenominator)&&!(this.numericNumerator>Number.MAX_SAFE_INTEGER||this.numericDenominator>Number.MAX_SAFE_INTEGER||this.numericNumerator<Number.MIN_SAFE_INTEGER||this.numericDenominator<Number.MIN_SAFE_INTEGER)}checkErrors(){return this.clearErrors(),this.isNotEmpty()&&!this.validateInput()?(this.errors.push("Некорректный формат данных. Разрешены только натуральные числа"),!1):!!this.isValidNumericValue()||(this.errors.push(`Неподдерживаемое число. Возможные значения лежат в диапазоне [${Number.MIN_SAFE_INTEGER} - ${Number.MAX_SAFE_INTEGER}]`),!1)}clearErrors(){this.errors=[]}validate(){return this.validateInput()&&this.isValidNumericValue()&&this.checkErrors()}}let a=0;o._id=()=>a++;class s{constructor(r=""){this.id=s._id(),this._type=r,this.order=s.ORDERS[r]}static isOperator(r){return r.__proto__.constructor===s}get type(){return this._type}set type(r){this._type=r,this.order=s.ORDERS[r]}}let u=-1;s._id=()=>u--;const c={MINUS:"-",PLUS:"+",MULTIPLY:"*",DIVIDE:"/"},m={[c.MINUS]:2,[c.PLUS]:2,[c.MULTIPLY]:1,[c.DIVIDE]:1};s.TYPES=Object.values(c),s.OPERATORS=c,s.ORDERS=m;var p=function(r,t){var e=t._c;return e("div",{staticClass:"fractionComponent"},[e("div",[e("input",t._g({attrs:{readonly:t.props.readonly,type:"number"},domProps:{value:t.props.fraction.numerator}},Object.assign({},t.listeners,{input:t.listeners.input?t.listeners.input.bind(this,t.props.fraction,"numerator"):function(){}})))]),e("hr"),e("div",[e("input",t._g({attrs:{readonly:t.props.readonly,type:"number"},domProps:{value:t.props.fraction.denominator}},Object.assign({},t.listeners,{input:t.listeners.input?t.listeners.input.bind(this,t.props.fraction,"denominator"):function(){}})))]),e("div",t._l(t.props.fraction.errors,(function(r){return e("div",{key:r,staticStyle:{color:"red","font-size":"0.5em"}},[t._v(" "+t._s(r)+" ")])})),0)])},l=[],d={name:"FractionComponent",functional:!0},h=d,_=(e("2e3d"),e("2877")),N=Object(_["a"])(h,p,l,!0,null,"a97dac22",null),f=N.exports,E=function(r,t){var e=t._c;return e("div",[e("select",t._g({domProps:{value:t.props.operator.type}},t.listeners),[e("option",{attrs:{value:""}},[t._v("Chose an operator")]),t._l(t.props.operatorTypes,(function(r){return e("option",{key:r,domProps:{value:r}},[t._v(t._s(r))])}))],2)])},v=[],D={name:"OperatorComponent",functional:!0},O=D,y=(e("2ea7"),Object(_["a"])(O,E,v,!0,null,"62bc0865",null)),b=y.exports,I={name:"Calc",components:{OperatorComponent:b,FractionComponent:f},data(){return{fractions:[new o,new o],operators:[new s(s.OPERATORS.MULTIPLY)],OPERATOR_TYPES:s.TYPES,Fraction:o,Operator:s}},computed:{expressionMembers(){const r=[];return this.fractions.forEach((t,e,n)=>{r.push(t),n.length-1!==e&&r.push(this.operators[e])}),r},result(){if(this.fractions.every(r=>r.validate())&&this.operators.every(({type:r})=>r)){let r=!1;const t=[...this.expressionMembers];while(!r){let e=null,n=null;if(t.forEach((r,t)=>{Object.prototype.hasOwnProperty.call(r,"order")&&(null===e||r.order<e)&&(e=r.order,n=t)}),null!==n){const r=this.calculate(t[n-1],t[n+1],t[n]);t.splice(n-1,3,r)}else r=!0}const e=t[0],n=this.gcd(e);return new o(e.numerator/n,e.denominator/n)}return new o(0,0)}},methods:{addFraction(){this.fractions.push(new o),this.operators.push(new s)},calculate(r,t,e){switch(e.type){case s.OPERATORS.PLUS:return this.add(r,t);case s.OPERATORS.MINUS:return this.subtract(r,t);case s.OPERATORS.DIVIDE:return this.divide(r,t);case s.OPERATORS.MULTIPLY:return this.multiply(r,t)}},add(r,t){if(r.numericDenominator===t.numericDenominator)return new o(r.numericNumerator+t.numericNumerator,r.numericDenominator);{const e=new o(r.numericNumerator*t.numericDenominator,r.numericDenominator*t.numericDenominator),n=new o(t.numericNumerator*r.numericDenominator,t.numericDenominator*r.numericDenominator);return new o(e.numericNumerator+n.numericNumerator,e.numericDenominator)}},subtract(r,t){if(r.numericDenominator===t.numericDenominator)return new o(r.numericNumerator-t.numericNumerator,r.numericDenominator);{const e=new o(r.numericNumerator*t.numericDenominator,r.numericDenominator*t.numericDenominator),n=new o(t.numericNumerator*r.numericDenominator,t.numericDenominator*r.numericDenominator);return new o(e.numericNumerator-n.numericNumerator,e.numericDenominator)}},divide(r,t){return new o(r.numericNumerator*t.numericDenominator,r.numericDenominator*t.numericNumerator)},multiply(r,t){return new o(r.numericNumerator*t.numericNumerator,r.numericDenominator*t.numericDenominator)},gcd(r){let t=r.numericNumerator,e=r.numericDenominator;if(t=Math.abs(t),e=Math.abs(e),e>t){const r=t;t=e,e=r}while(1){if(0===e)return t;if(t%=e,0===t)return e;e%=t}},onFractionInput(r,t,e){this.$set(r,t,e.target.value),r.checkErrors()},onOperatorInput(r,t){this.$set(r,"type",t.target.value)}}},R=I,S=(e("9aba"),Object(_["a"])(R,n,i,!1,null,"2a6c071c",null));t["default"]=S.exports},"9aba":function(r,t,e){"use strict";var n=e("d00d"),i=e.n(n);i.a},d00d:function(r,t,e){},df38:function(r,t,e){},f8aa:function(r,t,e){}}]);
//# sourceMappingURL=calc.fe2222d9.js.map