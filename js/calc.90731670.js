(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["calc"],{"2e3d":function(t,r,n){"use strict";var e=n("f8aa"),o=n.n(e);o.a},"2ea7":function(t,r,n){"use strict";var e=n("df38"),o=n.n(e);o.a},"39c1":function(t,r,n){"use strict";n.r(r);var e=function(){var t=this,r=t.$createElement,n=t._self._c||r;return n("div",[n("div",{staticClass:"grid"},[t._l(t.expressionMembers,(function(r){return n("div",{key:r.id,staticClass:"grid__item"},[t.Fraction.isFraction(r)?n("FractionComponent",{attrs:{fraction:r},on:{input:t.onFractionInput}}):t._e(),t.Operator.isOperator(r)?n("OperatorComponent",{attrs:{operator:r,"operator-types":t.OPERATOR_TYPES},on:{input:function(n){return t.onOperatorInput(r,n)}}}):t._e()],1)})),n("div",{staticClass:"grid__item"},[n("div",{staticStyle:{display:"flex","align-items":"center"}},[n("div",{staticStyle:{"padding-right":"10px"}},[t._v(" = ")]),n("div",[n("FractionComponent",{attrs:{fraction:t.result,readonly:""}})],1)])])],2),n("button",{on:{click:t.addFraction}},[t._v("ADD FRACTION")])])},o=[];class i{constructor(t=null,r=null){this.id=i._id(),this._numerator=t,this._denominator=r,this.errors=[],this.pattern=/^-?[0-9]+$/}static isFraction(t){return t.__proto__.constructor===i}get numerator(){return null===this._numerator||""===this._numerator?"":this._numerator}get numericNumerator(){return+this._numerator}set numerator(t){this._numerator=t}get denominator(){return null===this._denominator||""===this._denominator?"":this._denominator}get numericDenominator(){return+this._denominator}set denominator(t){this._denominator=t}isNotEmpty(){return!(!this._numerator||!this._denominator)}validateInput(){return this.isNotEmpty()&&!(!this.pattern.test(this._numerator)||!this.pattern.test(this._denominator))}isValidNumericValue(){return!isNaN(this.numericNumerator)&&!isNaN(this.numericDenominator)&&!(this.numericNumerator>Number.MAX_SAFE_INTEGER||this.numericDenominator>Number.MAX_SAFE_INTEGER||this.numericNumerator<Number.MIN_SAFE_INTEGER||this.numericDenominator<Number.MIN_SAFE_INTEGER)}checkErrors(){return this.clearErrors(),this.isNotEmpty()&&!this.validateInput()?(this.errors.push("Некорректный формат данных. Разрешены только натуральные числа"),!1):!!this.isValidNumericValue()||(this.errors.push(`Неподдерживаемое число. Возможные значения лежат в диапазоне [${Number.MIN_SAFE_INTEGER} - ${Number.MAX_SAFE_INTEGER}]`),!1)}clearErrors(){this.errors=[]}validate(){return this.validateInput()&&this.isValidNumericValue()&&this.checkErrors()}}let a=0;i._id=()=>a++;class s{constructor(t=""){this.id=s._id(),this._type=t,this.order=s.ORDERS[t]}static isOperator(t){return t.__proto__.constructor===s}get type(){return this._type}set type(t){this._type=t,this.order=s.ORDERS[t]}}let u=-1;s._id=()=>u--;const c={MINUS:"-",PLUS:"+",MULTIPLY:"*",DIVIDE:"/"},m={[c.MINUS]:2,[c.PLUS]:2,[c.MULTIPLY]:1,[c.DIVIDE]:1};s.TYPES=Object.values(c),s.OPERATORS=c,s.ORDERS=m;var d=function(t,r){var n=r._c;return n("div",{staticClass:"fractionComponent"},[n("div",[n("input",r._g({attrs:{readonly:r.props.readonly,type:"number"},domProps:{value:r.props.fraction.numerator}},Object.assign({},r.listeners,{input:r.listeners.input?r.listeners.input.bind(this,r.props.fraction,"numerator"):function(){}})))]),n("hr"),n("div",[n("input",r._g({attrs:{readonly:r.props.readonly,type:"number"},domProps:{value:r.props.fraction.denominator}},Object.assign({},r.listeners,{input:r.listeners.input?r.listeners.input.bind(this,r.props.fraction,"denominator"):function(){}})))]),n("div",r._l(r.props.fraction.errors,(function(t){return n("div",{key:t,staticStyle:{color:"red","font-size":"0.5em"}},[r._v(" "+r._s(t)+" ")])})),0)])},p=[],l={name:"FractionComponent",functional:!0},h=l,_=(n("2e3d"),n("2877")),f=Object(_["a"])(h,d,p,!0,null,"a97dac22",null),E=f.exports,v=function(t,r){var n=r._c;return n("div",[n("select",r._g({domProps:{value:r.props.operator.type}},r.listeners),[n("option",{attrs:{value:""}},[r._v("Chose an operator")]),r._l(r.props.operatorTypes,(function(t){return n("option",{key:t,domProps:{value:t}},[r._v(r._s(t))])}))],2)])},O=[],y={name:"OperatorComponent",functional:!0},N=y,I=(n("2ea7"),Object(_["a"])(N,v,O,!0,null,"62bc0865",null)),R=I.exports,b={name:"Calc",components:{OperatorComponent:R,FractionComponent:E},data(){return{fractions:[new i,new i],operators:[new s(s.OPERATORS.MULTIPLY)],OPERATOR_TYPES:s.TYPES,Fraction:i,Operator:s}},computed:{expressionMembers(){const t=[];return this.fractions.forEach((r,n,e)=>{t.push(r),e.length-1!==n&&t.push(this.operators[n])}),t},result(){if(this.fractions.every(t=>t.validate())&&this.operators.every(({type:t})=>t)){let t=!1;const r=[...this.expressionMembers];while(!t){let n=null,e=null;if(r.forEach((t,r)=>{Object.prototype.hasOwnProperty.call(t,"order")&&(null===n||t.order<n)&&(n=t.order,e=r)}),null!==e){const t=this.calculate(r[e-1],r[e+1],r[e]);r.splice(e-1,3,t)}else t=!0}const n=r[0],e=this.gcd(n);return new i(n.numerator/e,n.denominator/e)}return new i(0,0)}},methods:{addFraction(){this.fractions.push(new i),this.operators.push(new s)},calculate(t,r,n){switch(n.type){case s.OPERATORS.PLUS:return this.add(t,r);case s.OPERATORS.MINUS:return this.subtract(t,r);case s.OPERATORS.DIVIDE:return this.divide(t,r);case s.OPERATORS.MULTIPLY:return this.multiply(t,r)}},add(t,r){if(t.denominator===r.denominator)return new i(t.numerator+r.numerator,t.denominator);{const n=new i(t.numerator*r.denominator,t.denominator*r.denominator),e=new i(r.numerator*t.denominator,r.denominator*t.denominator);return new i(n.numerator+e.numerator,n.denominator)}},subtract(t,r){if(t.denominator===r.denominator)return new i(t.numerator-r.numerator,t.denominator);{const n=new i(t.numerator*r.denominator,t.denominator*r.denominator),e=new i(r.numerator*t.denominator,r.denominator*t.denominator);return new i(n.numerator-e.numerator,n.denominator)}},divide(t,r){return new i(t.numerator*r.denominator,t.denominator*r.numerator)},multiply(t,r){return new i(t.numerator*r.numerator,t.denominator*r.denominator)},gcd(t){let r=t.numerator,n=t.denominator;if(r=Math.abs(r),n=Math.abs(n),n>r){const t=r;r=n,n=t}while(1){if(0===n)return r;if(r%=n,0===r)return n;n%=r}},onFractionInput(t,r,n){this.$set(t,r,n.target.value),t.checkErrors()},onOperatorInput(t,r){this.$set(t,"type",r.target.value)}}},S=b,w=(n("707a"),Object(_["a"])(S,e,o,!1,null,"71a2a886",null));r["default"]=w.exports},"3d75":function(t,r,n){},"707a":function(t,r,n){"use strict";var e=n("3d75"),o=n.n(e);o.a},df38:function(t,r,n){},f8aa:function(t,r,n){}}]);
//# sourceMappingURL=calc.90731670.js.map